<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Brokk MOP - Dev Mode</title>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif; background-color: #fff; color: #111; margin: 1em; }
    body.theme-dark { background-color: #2b2b2b; color: #bbb; }
    pre { white-space: pre-wrap; word-break: break-all; }
    #spinner { padding: 0.5em; color: #888; }
    body.theme-dark #spinner { color: #888; }
    #dev-tools { margin: 1em 0; padding: 1em; background-color: #f0f0f0; border: 1px solid #ccc; }
    body.theme-dark #dev-tools { background-color: #3a3a3a; border: 1px solid #555; color: #bbb; }
  </style>
</head>
<body>
  <h1>Brokk MOP - Development Mode</h1>
  <p>Events from Java will be logged to the console and displayed raw below.</p>
  <div id="app"></div>
  <pre id="log"></pre>
  <div id="spinner" style="display: none;"></div>
  <div id="dev-tools">
    <h3>Dev Tools</h3>
    <button onclick="simulateEvent('chunk', { content: '# Test \n**content** from dev tool' })">Simulate Chunk Event</button>
    <button onclick="simulateEvent('theme', { dark: !document.body.classList.contains('theme-dark') })">Toggle Theme</button>
    <button onclick="simulateEvent('clear')">Clear Log</button>
    <button onclick="simulateEvent('spinner', { message: 'Testing spinner...' }); setTimeout(() => simulateEvent('spinner', { message: '' }), 2000);">Test Spinner</button>
  </div>
  <script type="module" src="/src/index.js"></script>
  <script>
    // Mock Java bridge for dev mode
    window.javaBridge = {
      onAck: (epoch) => console.log('Mock ACK for epoch:', epoch)
    };
    
    function simulateEvent(type, data = {}) {
      window.brokk.onEvent({ type, epoch: Date.now(), ...data });
    }
  </script>
</body>
</html>
