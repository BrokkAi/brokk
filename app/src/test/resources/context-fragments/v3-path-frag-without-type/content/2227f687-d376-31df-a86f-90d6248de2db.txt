diff --git a/app/src/main/java/ai/brokk/EditBlock.java b/app/src/main/java/ai/brokk/EditBlock.java
index 6fe62aa..f0044a7 100644
--- a/app/src/main/java/ai/brokk/EditBlock.java
+++ b/app/src/main/java/ai/brokk/EditBlock.java
@@ -747,24 +747,26 @@
         var scp = scpOpt.get();
 
         // Only Java is supported right now
-        var supportedAnalyzer = analyzer.subAnalyzer(Languages.JAVA);
+        var supportedAnalyzerOpt = analyzer.subAnalyzer(Languages.JAVA);
         var supportedExt = Languages.JAVA.getExtensions();
         Predicate<String> isSupportedExt = extension -> supportedExt.contains(extension.toLowerCase(Locale.ROOT));
 
         // Defensive assertion: BRK markers are only valid in a Java-only editable workspace
         var editableFiles = contextManager.getFilesInContext();
-        var javaOnly = supportedAnalyzer.isPresent()
+        // if this boolean check is aliased to a variable, the `.get()` below will be flagged by Error Prone
+        if (!(supportedAnalyzerOpt.isPresent()
                 && !editableFiles.isEmpty()
-                && editableFiles.stream().allMatch(f -> isSupportedExt.test(f.extension()));
-        if (!javaOnly) {
+                && editableFiles.stream().allMatch(f -> isSupportedExt.test(f.extension())))) {
             throw new AssertionError(
                     "BRK_CLASS/BRK_FUNCTION used outside a Java-only editable workspace; prompt gating bug.");
         }
 
+        var supportedAnalyzer = supportedAnalyzerOpt.get();
+
         String shortName = fqName.contains(".") ? fqName.substring(fqName.lastIndexOf('.') + 1) : fqName;
         if ("CLASS".equals(kind)) {
             // Prefer exact definition lookup, then ensure it's a Java class.
-            var def = analyzer.getDefinition(fqName);
+            var def = supportedAnalyzer.getDefinition(fqName);
             if (def.isPresent()) {
                 var cu = def.get();
                 if (!isSupportedExt.test(cu.source().extension())) {
@@ -779,7 +781,7 @@
             }
 
             // No exact match; suggest up to 3 similarly named Java classes
-            var suggestions = analyzer.searchDefinitions(shortName).stream()
+            var suggestions = supportedAnalyzer.searchDefinitions(shortName).stream()
                     .filter(cu -> isSupportedExt.test(cu.source().extension()))
                     .map(CodeUnit::fqName)
                     .filter(n -> {
@@ -791,9 +793,9 @@
             var extra = suggestions.isEmpty() ? "" : " Did you mean " + String.join(", ", suggestions) + "?";
             throw new NoMatchException("No class source found for '" + fqName + "'." + extra);
         } else {
-            Set<String> sources = AnalyzerUtil.getMethodSources(analyzer, fqName, true);
+            Set<String> sources = AnalyzerUtil.getMethodSources(supportedAnalyzer, fqName, true);
             if (sources.isEmpty()) {
-                var suggestions = analyzer.searchDefinitions(shortName).stream()
+                var suggestions = supportedAnalyzer.searchDefinitions(shortName).stream()
                         .map(CodeUnit::fqName)
                         .limit(3)
                         .toList();
diff --git a/app/src/test/java/ai/brokk/prompts/EditBlockSyntaxAwareAssertionTest.java b/app/src/test/java/ai/brokk/prompts/EditBlockSyntaxAwareAssertionTest.java
index 307494b..6d2aa2a 100644
--- a/app/src/test/java/ai/brokk/prompts/EditBlockSyntaxAwareAssertionTest.java
+++ b/app/src/test/java/ai/brokk/prompts/EditBlockSyntaxAwareAssertionTest.java
@@ -1,6 +1,9 @@
 package ai.brokk.prompts;
 
+import static org.junit.jupiter.api.Assertions.assertDoesNotThrow;
+import static org.junit.jupiter.api.Assertions.assertFalse;
 import static org.junit.jupiter.api.Assertions.assertThrows;
+import static org.junit.jupiter.api.Assertions.assertTrue;
 
 import ai.brokk.EditBlock;
 import ai.brokk.IConsoleIO;
@@ -18,6 +21,9 @@
 /**
  * Ensures BRK_* markers are rejected when the editable workspace contains non-Java files.
  * The defensive assertion in EditBlock.resolveBrkSnippet should throw AssertionError.
+ *
+ * Also validates that in a multi-language repository, when the editable workspace is Java-only,
+ * BRK_FUNCTION resolves correctly and applies without interference from other languages.
  */
 public class EditBlockSyntaxAwareAssertionTest {
 
@@ -64,4 +70,55 @@
             assertThrows(AssertionError.class, () -> EditBlock.apply(cm, io, List.of(block)));
         }
     }
+
+    @Test
+    void brkFunctionResolvesInMultiLanguageRepoWhenEditableIsJavaOnly() throws Exception {
+        try (var project = InlineTestProjectCreator.code(
+                        """
+                        package p;
+
+                        public class A {
+                            public String greet(String name) {
+                                return "Hello, " + name;
+                            }
+                        }
+                        """
+                                .stripIndent(),
+                        "src/main/java/p/A.java")
+                // Add a non-Java file to make the repository multi-language,
+                // but do NOT include it in the editable set.
+                .addFileContents(
+                        """
+                        export function sum(a, b) { return a + b; }
+                        """,
+                        "web/app.js")
+                .build()) {
+
+            var javaFile = new ProjectFile(project.getRoot(), "src/main/java/p/A.java");
+            var editable = Set.of(javaFile);
+
+            IAnalyzer analyzer = AnalyzerCreator.createTreeSitterAnalyzer(project);
+            IConsoleIO io = new NoOpConsoleIO();
+            var cm = new TestContextManager((TestProject) project, io, editable, analyzer);
+
+            var block = new EditBlock.SearchReplaceBlock(
+                    "src/main/java/p/A.java",
+                    "BRK_FUNCTION p.A.greet",
+                    """
+                    public String greet(String name) {
+                        return "Hi, " + name;
+                    }
+                    """
+                            .stripIndent());
+
+            var result = assertDoesNotThrow(() -> EditBlock.apply(cm, io, List.of(block)));
+
+            assertTrue(result.hadSuccessfulEdits(), "Expected the BRK_FUNCTION edit to apply successfully");
+            assertTrue(result.failedBlocks().isEmpty(), "No failed blocks expected for valid BRK_FUNCTION resolution");
+
+            var updated = javaFile.read().orElseThrow();
+            assertTrue(updated.contains("return \"Hi, \" + name;"), "Updated method body should be present");
+            assertFalse(updated.contains("return \"Hello, \" + name;"), "Old method body should be replaced");
+        }
+    }
 }
